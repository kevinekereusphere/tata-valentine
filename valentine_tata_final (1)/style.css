@import url('https://fonts.googleapis.com/css2?family=Bellota:ital@1&display=swap');

*{ margin:0; padding:0; box-sizing:border-box; }

:root{
  --bg: #fa9e8c;
  --deep: #8a0707;
  --cream: #fbceb1;
}

body{
  min-height: 100vh;
  width: 100%;
  background-color: var(--bg);
  overflow-x: hidden;
  overflow-y: auto;
}

/* ===== SCENE SYSTEM ===== */
.scene{
  display: none;
  min-height: 100vh;
  width: 100%;
}

.scene.active{
  display: block;
  animation: sceneFade 500ms ease both;
}

@keyframes sceneFade{
  from{ opacity: 0; transform: translateY(8px); }
  to{ opacity: 1; transform: translateY(0); }
}

.scene-inner{
  width: min(1100px, 92vw);
  margin: 0 auto;
  min-height: 100vh;
  display: grid;
  place-items: center;
  gap: 16px;
  padding: 26px 0;
  text-align: center;
}

.scene3{
  align-content: center;
}

/* ===== HERO TEXT ===== */
.hero{ position: relative; text-align:center; }
.hero.compact{ margin-bottom: 2px; }

.big-bg{
  font-family: 'Bellota', system-ui;
  font-size: clamp(2rem, 7vw, 4.2rem);
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: rgba(255,255,255,0.18);
  line-height: 1.05;
  user-select: none;
}

.title{
  margin-top: 8px;
  font-family: 'Bellota', system-ui;
  font-size: clamp(1.2rem, 4.5vw, 2rem);
  color: var(--deep);
  text-shadow: 1px 1px 0 rgba(255,255,255,0.25);
}

.subtitle{
  margin-top: 6px;
  font-family: system-ui;
  font-size: clamp(1rem, 3.5vw, 1.15rem);
  color: rgba(255,255,255,0.92);
}
.subtitle.small{ font-size: clamp(0.95rem, 3.2vw, 1.05rem); }

/* ===== SCENE 1: big heart explosion ===== */
.big-heart{
  width: clamp(120px, 22vw, 190px);
  height: clamp(120px, 22vw, 190px);
  border-radius: 999px;
  border: 0;
  cursor: pointer;
  font-size: clamp(3.2rem, 8vw, 5rem);
  line-height: 1;
  background: rgba(255,255,255,0.25);
  color: var(--deep);
  box-shadow: 0 20px 50px rgba(0,0,0,0.15);
  backdrop-filter: blur(6px);
  transition: transform 180ms ease, background 180ms ease;
}

.big-heart:hover{ transform: scale(1.05); }
.big-heart:active{ transform: scale(0.95); }

.big-heart.pop{ animation: pop 700ms ease both; }

@keyframes pop{
  0%{ transform: scale(1); }
  45%{ transform: scale(1.25); }
  70%{ transform: scale(0.2); opacity: 0.1; }
  100%{ transform: scale(0); opacity: 0; }
}

.particles{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 999;
}

.particles .p{
  position: fixed;
  transform: translate(-50%, -50%);
  font-size: 18px;
  opacity: 0;
  animation: fly var(--dur) ease-out forwards;
  filter: drop-shadow(0 8px 10px rgba(0,0,0,0.18));
  will-change: transform, opacity;
}

@keyframes fly{
  0%{ opacity: 0; transform: translate(-50%,-50%) scale(0.6); }
  10%{ opacity: 1; }
  100%{
    opacity: 0;
    transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) rotate(var(--rot)) scale(1.2);
  }
}

.hint{
  font-family: system-ui;
  font-size: 0.9rem;
  color: rgba(255,255,255,0.75);
  max-width: 62ch;
}

/* ===== SCENE 2: heart tree ===== */
.tree-wrap{
  width: 100%;
  display: grid;
  grid-template-columns: 1fr 1.2fr;
  gap: 18px;
  align-items: center;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.25);
  border-radius: 22px;
  padding: 18px;
  backdrop-filter: blur(6px);
}

.tree{
  position: relative;
  height: 360px;
  display: grid;
  place-items: end center;
}

.trunk{
  width: 70px;
  height: 220px;
  background: rgba(138, 7, 7, 0.55);
  border-radius: 18px;
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.12);
}

.crown{
  position: absolute;
  bottom: 160px;
  width: 260px;
  height: 210px;
}

.leaf{
  position: absolute;
  font-size: 34px;
  color: var(--deep);
  animation: float 2.6s ease-in-out infinite;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,0.12));
}

@keyframes float{
  0%,100%{ transform: translateY(0); }
  50%{ transform: translateY(-10px); }
}

.h1{ left: 10px; top: 85px; animation-delay: .0s; }
.h2{ left: 55px; top: 30px; animation-delay: .2s; }
.h3{ left: 110px; top: 10px; animation-delay: .4s; }
.h4{ left: 170px; top: 30px; animation-delay: .1s; }
.h5{ left: 210px; top: 85px; animation-delay: .3s; }
.h6{ left: 35px; top: 125px; animation-delay: .5s; }
.h7{ left: 110px; top: 95px; animation-delay: .25s; }
.h8{ left: 185px; top: 125px; animation-delay: .45s; }
.h9{ left: 110px; top: 155px; animation-delay: .15s; }

.story{
  text-align: left;
  padding: 6px 6px;
}

.story h2{
  font-family: 'Bellota', system-ui;
  font-size: clamp(1.4rem, 4.5vw, 2rem);
  color: rgba(255,255,255,0.95);
  margin-bottom: 6px;
}

.story p{
  font-family: system-ui;
  font-size: clamp(0.98rem, 3.6vw, 1.05rem);
  color: rgba(255,255,255,0.9);
  margin-top: 8px;
  line-height: 1.35;
}

.story-big{
  font-weight: 800;
  font-size: clamp(1.05rem, 4vw, 1.2rem);
}

.continue{
  margin-top: 14px;
  border: 0;
  padding: 12px 18px;
  border-radius: 999px;
  font-weight: 800;
  cursor: pointer;
  background: rgba(255,255,255,0.95);
  box-shadow: 0 10px 20px rgba(0,0,0,0.18);
}

/* ===== SCENE 3: final card ===== */
.final-card{
  width: min(980px, 92vw);
  display: grid;
  grid-template-columns: 1.1fr 1fr;
  gap: 16px;
  align-items: center;
  background: rgba(255,255,255,0.20);
  border: 1px solid rgba(255,255,255,0.25);
  border-radius: 22px;
  padding: 16px;
  backdrop-filter: blur(6px);
}

.msg{
  text-align: left;
}

.msg h1{
  font-family: 'Bellota', system-ui;
  font-size: clamp(1.7rem, 5vw, 2.4rem);
  color: #fff;
  margin: 0;
}

.msg p{
  font-family: system-ui;
  font-size: clamp(0.95rem, 3.5vw, 1.05rem);
  color: rgba(255,255,255,0.92);
  margin-top: 6px;
}

.msg .big{
  font-size: clamp(1.05rem, 4vw, 1.35rem);
  font-weight: 800;
}

.actions{
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 10px;
}

.actions button{
  border: 0;
  padding: 12px 18px;
  border-radius: 999px;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 10px 20px rgba(0,0,0,0.18);
  background: rgba(255,255,255,0.95);
}

.actions button#no{
  background: rgba(255,255,255,0.75);
}

.result{
  margin-top: 12px;
  text-align: left;
  font-family: system-ui;
  font-size: clamp(1.02rem, 3.6vw, 1.15rem);
  color: #fff;
  opacity: 0;
  transform: translateY(10px);
  transition: 400ms ease;
  padding: 10px 14px;
  border-radius: 14px;
  background: rgba(0,0,0,0.18);
}

.result.show{
  opacity: 1;
  transform: translateY(0);
}

/* ===== SLIDER ===== */
.slider{
  position: relative;
  width: 100%;
}

.viewport{
  width: 100%;
  aspect-ratio: 4 / 3;
  overflow: hidden;
  border-radius: 18px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.16);
  background: rgba(255,255,255,0.15);
  touch-action: pan-y;
}

.track{
  display: flex;
  height: 100%;
  transform: translateX(0);
  transition: transform 420ms ease;
  will-change: transform;
}

.track img{
  width: 100%;
  height: 100%;
  flex: 0 0 100%;
  object-fit: cover;
}

.nav{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 40px;
  height: 40px;
  border: 0;
  border-radius: 999px;
  cursor: pointer;
  background: rgba(255,255,255,0.75);
  box-shadow: 0 10px 20px rgba(0,0,0,0.18);
  font-size: 24px;
  line-height: 1;
}

.nav.prev{ left: 10px; }
.nav.next{ right: 10px; }

.dots{
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 10px;
}

.dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  border: 0;
  cursor: pointer;
  background: rgba(255,255,255,0.45);
}

.dot.active{
  background: rgba(255,255,255,0.95);
}

/* ===== pixel heart ===== */
.heart-wrap{
  display: flex;
  justify-content: center;
  padding-top: 10px;
}

.heart-container{
  position: relative;
  display: table;
  transform: scale(clamp(0.75, 2.6vw, 1));
  transform-origin: top center;
}

.box{
  height: 25px;
  width: 25px;
  transform: translate(0, 0);
  background: #ff0000;
  border-radius: 3px;
  float: left;
  margin: 0 2px 2px 0;
  opacity: 0;
}

.clear{ clear: left; }
.transparent-bg{ background: none; }

.box:not(.transparent-bg){
  animation: heartAnim 6s ease infinite;
  transition: all 1s ease;
}

@keyframes heartAnim{
  0% { background: #ff0000; transform: translate(0, -24vh); opacity: 0; }
  24%, 76% { background: var(--deep); transform: translate(0, 0); opacity: 1; }
  100% { background: #ff0000; transform: translate(0, 24vh); opacity: 0; }
}

.delay-1{ animation-delay: 0.5s !important; }
.delay-2{ animation-delay: 0.6s !important; }
.delay-3{ animation-delay: 0.7s !important; }
.delay-4{ animation-delay: 0.8s !important; }
.delay-5{ animation-delay: 0.9s !important; }
.delay-6{ animation-delay: 1s !important; }
.delay-7{ animation-delay: 1.1s !important; }
.delay-8{ animation-delay: 1.2s !important; }
.delay-9{ animation-delay: 1.3s !important; }
.delay-10{ animation-delay: 1.4s !important; }

/* mobile */
@media (max-width: 900px){
  .final-card{
    grid-template-columns: 1fr;
    text-align: center;
  }
  .msg{ text-align: center; }
  .result{ text-align: center; }
}

@media (max-width: 820px){
  .tree-wrap{ grid-template-columns: 1fr; text-align: center; }
  .story{ text-align: center; }
}
